<!DOCTYPE html>
<html lang="en" data-theme="{{ settings.get('theme', 'dark') }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar â€” Sclera</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- FullCalendar CDN -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
</head>
<body>
    <div class="dashboard-layout">
        {% include '_topnav.html' %}

        <main class="main-content">
            <div class="header-action-row">
                <h2>Academic Calendar</h2>
                <div class="header-actions">
                    <a href="{{ url_for('assignments_dashboard') }}" class="btn btn-secondary">
                        <span class="material-symbols-outlined">assignment</span>
                        Manage Assignments
                    </a>
                </div>
            </div>

            <div class="calendar-container">
                <div id="calendar"></div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var events = JSON.parse('{{ events | tojson | safe }}');

            // Map types to classes
            events.forEach(e => {
                e.className = 'event-' + e.type;
            });

            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
                },
                themeSystem: 'standard',
                events: events,
                height: 'parent',
                eventClick: function(info) {
                    // Implementation for details modal can go here
                }
            });
            calendar.render();
        });
    </script>
</body>
</html>
